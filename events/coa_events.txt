# Coat of Arms events

namespace = coa

coa.1 = {
	type = character_event
	hidden = yes
	trigger = {
		is_ruler = yes
	}
	immediate = {
		trigger_event = coa.10 # England
		trigger_event = coa.11 # Normans, Welsh, Saxons
	}
}

scripted_trigger can_event_change_coa_trigger = {
	holder = root
	has_user_set_coa = no
}

coa.10 = {
	type = character_event
	hidden = yes

	trigger = {
		title:k_england = {
			can_event_change_coa_trigger = yes
		}
	}

	immediate = {
		if = {
			limit = { coa_switch_to_saxon_trigger = yes }
			title:k_england = { set_coa = k_england } # reset
		}
		
		if = {
			limit = { coa_switch_to_norman_trigger = yes }
			if = {
				limit = { coa_england_switches_to_france_coa_trigger = yes }
				title:k_england = { set_coa = k_england_france }
			}
			else = {
				title:k_england = { set_coa = k_england_norman }
			}
		}
	}
}

scripted_effect coa_11_set_coa_effect = {
	title:$TITLE$ = { 
		if = {
			limit = { can_event_change_coa_trigger = yes }
			set_coa = $TITLE$
		}
	}
}

scripted_effect coa_11_set_coa_suffix_effect = {
	title:$TITLE$ = { 
		if = {
			limit = { can_event_change_coa_trigger = yes }
			set_coa = $TITLE$_$SUFFIX$
		}
	}
}

coa.11 = {
	type = character_event
	hidden = yes

	immediate = {
		if = {
			limit = { coa_switch_to_welsh_trigger = yes }
			coa_11_set_coa_effect = { TITLE = c_pembrokeshire }
			coa_11_set_coa_effect = { TITLE = c_glamorgan }
			coa_11_set_coa_effect = { TITLE = c_monmouthshire }
		}
		else_if = {
			limit = { coa_switch_to_saxon_trigger = yes }
			coa_11_set_coa_effect = { TITLE = c_hereford }
			coa_11_set_coa_effect = { TITLE = c_westmorland }
			coa_11_set_coa_effect = { TITLE = c_somerset }
			coa_11_set_coa_effect = { TITLE = c_hampton }
			coa_11_set_coa_effect = { TITLE = c_leicestershire }
			coa_11_set_coa_effect = { TITLE = c_northamptonshire  }
			coa_11_set_coa_effect = { TITLE = c_east_riding }
			coa_11_set_coa_effect = { TITLE = c_warwickshire }
			coa_11_set_coa_effect = { TITLE = c_gloucestershire }
			coa_11_set_coa_effect = { TITLE = c_wiltshire }
			coa_11_set_coa_effect = { TITLE = c_norfolk }
			coa_11_set_coa_effect = { TITLE = c_lancashire }
			coa_11_set_coa_effect = { TITLE = c_north_riding }
			coa_11_set_coa_effect = { TITLE = d_norfolk }
			coa_11_set_coa_effect = { TITLE = d_lancaster }
			coa_11_set_coa_effect = { TITLE = d_canterbury }
			coa_11_set_coa_effect = { TITLE = d_bedford }
			coa_11_set_coa_effect = { TITLE = d_york }
		}
		else_if = {
			limit = { coa_switch_to_norman_trigger = yes }
			coa_11_set_coa_suffix_effect = { TITLE = c_hereford SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_westmorland SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_somerset SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_hampton SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_leicestershire SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_northamptonshire SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_east_riding SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_warwickshire SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_gloucestershire SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_wiltshire SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_norfolk SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_lancashire SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_north_riding SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = d_norfolk SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = d_lancaster SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = d_canterbury SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = d_bedford SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = d_york SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_pembrokeshire SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_glamorgan SUFFIX = norman }
			coa_11_set_coa_suffix_effect = { TITLE = c_monmouthshire SUFFIX = norman }
		}
	}
}